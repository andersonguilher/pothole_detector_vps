<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auditoria Viária AI | Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e293b;
            --bg-color: #f3f4f6;
            --card-bg: #ffffff;
            --accent-green: #10b981;
            --accent-red: #ef4444;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'Inter', sans-serif;
            color: #334155;
            overflow-x: hidden;
        }

        .navbar {
            background-color: var(--secondary-color);
            padding: 0.8rem 0;
            z-index: 1030;
        }

        .navbar-brand {
            font-weight: 600;
            font-size: 1.2rem;
        }

        .main-container {
            max-width: 1600px;
            margin: 20px auto;
            padding: 0 20px;
            transition: all 0.3s ease;
        }

        #toggleSidebarBtn {
            cursor: pointer;
            color: white;
            font-size: 1.2rem;
            margin-right: 15px;
            transition: transform 0.2s;
        }

        #toggleSidebarBtn:hover {
            transform: rotate(90deg);
            color: var(--primary-color);
        }

        #sidebarCol {
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .sidebar-hidden {
            width: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            opacity: 0;
            display: none;
        }

        #mainContentCol {
            transition: all 0.3s ease;
        }

        .card-panel {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
            padding: 20px;
            margin-bottom: 20px;
        }

        .sticky-sidebar {
            position: sticky;
            top: 20px;
            height: fit-content;
        }

        h5 {
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .form-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: #64748b;
            margin-bottom: 3px;
        }

        .form-control,
        .form-select {
            font-size: 0.85rem;
            border-radius: 6px;
            padding: 8px 12px;
        }

        .form-range::-webkit-slider-thumb {
            background: var(--primary-color);
        }

        .btn {
            border-radius: 8px;
            font-weight: 500;
            padding: 10px 20px;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            border: none;
        }

        .btn-primary:hover {
            background-color: #1d4ed8;
            transform: translateY(-1px);
        }

        .preview-container {
            background: #0f172a;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            min-height: 400px;
            max-height: 75vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .preview-container img,
        .preview-container video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        #galeria-objetos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .thumb-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .thumb-card:hover {
            transform: translateY(-2px);
            border-color: var(--primary-color);
        }

        .thumb-card img {
            width: 100%;
            height: 90px;
            object-fit: cover;
            display: block;
        }

        .thumb-info {
            padding: 6px;
            text-align: left;
        }

        .thumb-id {
            font-size: 0.7rem;
            color: #94a3b8;
            font-weight: 700;
        }

        .thumb-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--secondary-color);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .modal-viewer {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(5px);
        }

        .modal-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 1200px;
            text-align: center;
        }

        .modal-content-img {
            max-width: 100%;
            max-height: 85vh;
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 30px;
            cursor: pointer;
            opacity: 0.8;
        }

        .close-btn:hover {
            opacity: 1;
        }

        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            transition: 0.2s;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .prev-btn {
            left: 20px;
        }

        .next-btn {
            right: 20px;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-dark">
        <div class="container-fluid main-container my-0">
            <div class="d-flex align-items-center">
                <i class="fas fa-bars" id="toggleSidebarBtn" onclick="toggleSidebar()"
                    title="Mostrar/Ocultar Configurações"></i>
                <span class="navbar-brand ms-2"><i class="fas fa-road me-2"></i>Auditoria Viária IA</span>
            </div>
            <div class="text-white-50 small d-none d-md-block"><i class="fas fa-circle text-success me-1"
                    style="font-size: 8px;"></i> Sistema Online</div>
        </div>
    </nav>

    <div id="imageModal" class="modal-viewer">
        <span class="close-btn" onclick="fecharModal()"><i class="fas fa-times"></i></span>
        <div class="nav-btn prev-btn" onclick="mudarSlide(1)"><i class="fas fa-chevron-left"></i></div>
        <div class="nav-btn next-btn" onclick="mudarSlide(-1)"><i class="fas fa-chevron-right"></i></div>
        <div class="modal-container"><img class="modal-content-img" id="img01">
            <div class="modal-caption text-white mt-3" id="caption"></div>
        </div>
    </div>

    <div class="container-fluid main-container">
        <div class="row" id="mainRow">
            <div class="col-lg-3 col-md-4" id="sidebarCol">
                <div class="sticky-sidebar">
                    <div class="card-panel">
                        <h5><i class="fas fa-sliders-h me-2"></i> Parâmetros</h5>
                        <form id="configForm">
                            <div class="mb-3">
                                <label class="form-label d-flex justify-content-between"><span>Buraco
                                        (Conf.)</span><span class="badge bg-primary rounded-pill"
                                        id="confBuracoVal">25%</span></label>
                                <input type="range" class="form-range inputs-config" id="confBuraco" min="0.1" max="1.0"
                                    step="0.05" value="0.25">
                            </div>
                            <div class="mb-3">
                                <label class="form-label d-flex justify-content-between"><span>Bueiro
                                        (Conf.)</span><span class="badge bg-secondary rounded-pill"
                                        id="confBueiroVal">30%</span></label>
                                <input type="range" class="form-range inputs-config" id="confBueiro" min="0.1" max="1.0"
                                    step="0.05" value="0.30">
                            </div>
                            <div class="row mb-3">
                                <div class="col-6"><label class="form-label">Resolução</label><select
                                        class="form-select inputs-config" id="resolutionIA">
                                        <option value="640">640p</option>
                                        <option value="736" selected>736p</option>
                                        <option value="1280">1280p</option>
                                    </select></div>
                                <div class="col-6"><label class="form-label">cm/px</label><input type="number"
                                        class="form-control inputs-config" id="pixelCm" value="0.04" step="0.01"></div>
                            </div>

                            <div class="mb-3 p-2 border rounded bg-light">
                                <label class="form-label mb-2">Info na Etiqueta</label>
                                <div class="form-check"><input class="form-check-input inputs-config" type="checkbox"
                                        id="showId" checked><label class="form-check-label small">ID (#)</label></div>
                                <div class="form-check"><input class="form-check-input inputs-config" type="checkbox"
                                        id="showType" checked><label class="form-check-label small">Tipo</label></div>
                                <div class="form-check"><input class="form-check-input inputs-config" type="checkbox"
                                        id="showConf" checked><label
                                        class="form-check-label small">Confiabilidade</label></div>
                                <div class="form-check"><input class="form-check-input inputs-config" type="checkbox"
                                        id="showDim" checked><label class="form-check-label small">Dimensões</label>
                                </div>
                                <div class="form-check"><input class="form-check-input inputs-config" type="checkbox"
                                        id="showArea" checked><label class="form-check-label small">Área</label></div>
                            </div>

                            <div class="form-check form-switch mb-2"><input class="form-check-input inputs-config"
                                    type="checkbox" id="calcMeasures" checked><label class="form-check-label small"
                                    for="calcMeasures">Calcular Massa Asfáltica</label></div>

                            <div class="form-check form-switch mb-2">
                                <input class="form-check-input inputs-config" type="checkbox" id="filterSize"
                                    onchange="toggleSizeInput()">
                                <label class="form-check-label small" for="filterSize">Filtrar Bueiro por
                                    Tamanho</label>
                            </div>
                            <div class="mb-3" id="sizeInputArea" style="display:none;">
                                <label class="form-label small">Tamanho Alvo (m)</label>
                                <input type="number" class="form-control inputs-config form-control-sm" id="targetSize"
                                    value="0.90" step="0.01">
                                <div class="form-text" style="font-size: 0.7rem;">Captura +/- 4% (Ex: 0.90 -> 0.86 a
                                    0.94)</div>
                            </div>

                            <div class="form-check form-switch mb-4"><input class="form-check-input inputs-config"
                                    type="checkbox" id="showLine"><label class="form-check-label small"
                                    for="showLine">Ver Linha Disparo (60%)</label></div>

                            <hr class="my-3" style="opacity:0.1">
                            <ul class="nav nav-pills nav-fill mb-3" id="pills-tab">
                                <li class="nav-item"><button class="nav-link active py-1" id="pills-video-tab"
                                        data-bs-toggle="pill" data-bs-target="#pills-video"><i class="fas fa-file"></i>
                                        Arquivo</button></li>
                                <li class="nav-item"><button class="nav-link py-1" id="pills-live-tab"
                                        data-bs-toggle="pill" data-bs-target="#pills-live"><i class="fas fa-wifi"></i>
                                        Live</button></li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="pills-video">
                                    <input type="file" class="form-control form-control-sm mb-3" id="videoInput"
                                        accept="video/*">
                                    <div class="d-grid gap-2"><button type="button" class="btn btn-primary btn-sm"
                                            id="btnProcessar" onclick="processarVideo()">INICIAR</button><button
                                            type="button" class="btn btn-danger btn-sm" id="btnCancelar"
                                            onclick="cancelarProcessamento()" style="display:none;">CANCELAR</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-live"><button type="button"
                                        class="btn btn-danger w-100 btn-sm" id="btnLive" onclick="toggleLive()">LIGAR
                                        CÂMERA</button></div>
                            </div>
                        </form>
                        <div class="mt-3 p-2 bg-light border rounded small text-muted text-center" id="statusBox">
                            Pronto.</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9 col-md-8" id="mainContentCol">
                <div class="card-panel p-0 bg-transparent border-0 shadow-none">
                    <div class="preview-container">
                        <img id="videoDisplay" src="" style="display:none;"><video id="webcam" autoplay playsinline
                            style="display:none;"></video>
                        <div id="placeholder" class="text-center"><i class="fas fa-video fa-3x mb-3"
                                style="color:#475569; opacity:0.5;"></i>
                            <p class="text-muted small">Aguardando entrada de vídeo</p>
                        </div>
                    </div>
                    <div class="progress mt-3" style="height: 6px;">
                        <div class="progress-bar" id="progressBar" style="width: 0%;"></div>
                    </div>
                    <div id="downloadArea" class="text-center mt-3" style="display:none;"><a id="downloadLink" href="#"
                            class="btn btn-success shadow-sm"><i class="fas fa-download me-2"></i> Baixar Vídeo
                            Processado</a></div>
                </div>
                <div class="card-panel mt-3">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5><i class="fas fa-images me-2"></i> Registro de Ocorrências</h5><button
                            class="btn btn-sm btn-outline-secondary" onclick="limparGaleria()"><i
                                class="fas fa-trash me-1"></i> Limpar</button>
                    </div>
                    <div id="galeria-objetos"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let ws = null, isLive = false, abortController = null, thumbnailsData = [], currentModalIndex = 0;
        const inputs = document.querySelectorAll('.inputs-config');

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebarCol'), main = document.getElementById('mainContentCol');
            if (sidebar.classList.contains('sidebar-hidden')) {
                sidebar.classList.remove('sidebar-hidden'); sidebar.classList.add('col-lg-3', 'col-md-4');
                main.classList.remove('col-12'); main.classList.add('col-lg-9', 'col-md-8');
                localStorage.setItem('sidebarState', 'visible');
            } else {
                sidebar.classList.add('sidebar-hidden'); sidebar.classList.remove('col-lg-3', 'col-md-4');
                main.classList.remove('col-lg-9', 'col-md-8'); main.classList.add('col-12');
                localStorage.setItem('sidebarState', 'hidden');
            }
        }

        function toggleSizeInput() {
            const isChecked = document.getElementById('filterSize').checked;
            document.getElementById('sizeInputArea').style.display = isChecked ? 'block' : 'none';
        }

        window.onload = () => {
            inputs.forEach(input => {
                const saved = localStorage.getItem(input.id);
                if (saved !== null) { if (input.type === 'checkbox') input.checked = (saved === 'true'); else input.value = saved; }
                if (input.id === 'confBuraco') document.getElementById('confBuracoVal').innerText = Math.round(input.value * 100) + '%';
                if (input.id === 'confBueiro') document.getElementById('confBueiroVal').innerText = Math.round(input.value * 100) + '%';
            });
            if (localStorage.getItem('sidebarState') === 'hidden') toggleSidebar();
            toggleSizeInput(); // Init state
        };

        inputs.forEach(input => {
            input.addEventListener('input', () => {
                localStorage.setItem(input.id, input.type === 'checkbox' ? input.checked : input.value);
                if (input.id === 'confBuraco') document.getElementById('confBuracoVal').innerText = Math.round(input.value * 100) + '%';
                if (input.id === 'confBueiro') document.getElementById('confBueiroVal').innerText = Math.round(input.value * 100) + '%';
                if (isLive && ws && ws.readyState === WebSocket.OPEN) enviarConfigWs();
            });
        });

        function getConfigs() {
            return {
                conf_buraco: parseFloat(document.getElementById('confBuraco').value),
                conf_bueiro: parseFloat(document.getElementById('confBueiro').value),
                resolution_ia: parseInt(document.getElementById('resolutionIA').value),
                pixel_to_cm2: parseFloat(document.getElementById('pixelCm').value),
                calculate_measures: document.getElementById('calcMeasures').checked,
                show_trigger_line: document.getElementById('showLine').checked,
                show_id: document.getElementById('showId').checked,
                show_type: document.getElementById('showType').checked,
                show_conf: document.getElementById('showConf').checked,
                show_dim: document.getElementById('showDim').checked,
                show_area: document.getElementById('showArea').checked,
                filter_by_size: document.getElementById('filterSize').checked,
                target_size: parseFloat(document.getElementById('targetSize').value)
            };
        }

        function enviarConfigWs() {
            const cfg = getConfigs();
            ws.send(JSON.stringify({
                type: 'config', data: {
                    conf_buraco: cfg.conf_buraco, conf_bueiro: cfg.conf_bueiro, resolution: cfg.resolution_ia,
                    pixel_cm2: cfg.pixel_to_cm2, measures: cfg.calculate_measures, show_line: cfg.show_trigger_line,
                    show_id: cfg.show_id, show_type: cfg.show_type, show_conf: cfg.show_conf, show_dim: cfg.show_dim, show_area: cfg.show_area,
                    filter_size: cfg.filter_by_size, target_size: cfg.target_size
                }
            }));
        }

        function adicionarThumbnail(thumb) {
            thumbnailsData.unshift(thumb);
            const div = document.createElement('div'); div.className = 'thumb-card'; div.onclick = () => abrirModalPorObjeto(thumb);
            div.innerHTML = `<img src="data:image/jpeg;base64,${thumb.image}"><div class="thumb-info"><div class="thumb-id">#${thumb.id}</div><div class="thumb-label" style="color:${thumb.label === 'BURACO' ? 'var(--accent-red)' : 'var(--primary-color)'}">${thumb.label}</div></div>`;
            document.getElementById('galeria-objetos').prepend(div);
        }
        function limparGaleria() { document.getElementById('galeria-objetos').innerHTML = ''; thumbnailsData = []; }
        function abrirModalPorObjeto(thumbObj) { currentModalIndex = thumbnailsData.findIndex(t => t.id === thumbObj.id); atualizarModal(); document.getElementById("imageModal").style.display = "block"; }
        function fecharModal() { document.getElementById("imageModal").style.display = "none"; }
        function mudarSlide(d) { currentModalIndex += d; if (currentModalIndex < 0) currentModalIndex = thumbnailsData.length - 1; if (currentModalIndex >= thumbnailsData.length) currentModalIndex = 0; atualizarModal(); }
        function atualizarModal() { if (thumbnailsData.length === 0) return; const item = thumbnailsData[currentModalIndex]; document.getElementById("img01").src = "data:image/jpeg;base64," + item.image; document.getElementById("caption").innerHTML = `<span style="color:var(--primary-color)">#${item.id}</span> ${item.label}`; }
        document.addEventListener('keydown', e => { if (document.getElementById("imageModal").style.display === "block") { if (e.key === "ArrowLeft") mudarSlide(-1); if (e.key === "ArrowRight") mudarSlide(1); if (e.key === "Escape") fecharModal(); } });

        async function processarVideo() {
            const fileInput = document.getElementById('videoInput');
            if (!fileInput.files[0]) return alert("Selecione um vídeo!");
            limparGaleria();
            const statusBox = document.getElementById('statusBox'); statusBox.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Carregando...';
            document.getElementById('downloadArea').style.display = 'none'; document.getElementById('btnProcessar').style.display = 'none'; document.getElementById('btnCancelar').style.display = 'block';
            document.getElementById('placeholder').style.display = 'none'; document.getElementById('videoDisplay').style.display = 'block';

            const cfg = getConfigs();
            const formData = new FormData(); formData.append("video", fileInput.files[0]);
            for (const key in cfg) formData.append(key, cfg[key]);
            abortController = new AbortController();

            try {
                const response = await fetch("/detectar_video", { method: "POST", body: formData, signal: abortController.signal });
                const reader = response.body.getReader(); const decoder = new TextDecoder(); let buffer = "";
                while (true) {
                    const { done, value } = await reader.read(); if (done) break;
                    buffer += decoder.decode(value, { stream: true }); const lines = buffer.split("\n"); buffer = lines.pop();
                    for (const line of lines) {
                        if (!line.trim()) continue;
                        try {
                            const data = JSON.parse(line);
                            if (data.status === "processing") {
                                if (data.preview) document.getElementById('videoDisplay').src = "data:image/jpeg;base64," + data.preview;
                                const pct = Math.round((data.current / data.total) * 100);
                                document.getElementById('progressBar').style.width = pct + "%";
                                statusBox.innerHTML = `<span class="text-primary fw-bold">${pct}%</span> &bull; ${data.objs} Ocorrências`;
                                if (data.thumbnails) data.thumbnails.forEach(t => adicionarThumbnail(t));
                            } else if (data.status === "complete") { finalizar(true, data); } else if (data.status === "error") { alert(data.message); finalizar(false); }
                        } catch (e) { }
                    }
                }
            } catch (err) { if (err.name !== 'AbortError') alert("Erro de conexão."); finalizar(false); }
        }

        function cancelarProcessamento() { if (abortController) { abortController.abort(); abortController = null; } finalizar(false); }
        function finalizar(sucesso, data = null) {
            document.getElementById('btnProcessar').style.display = 'block'; document.getElementById('btnCancelar').style.display = 'none';
            const statusBox = document.getElementById('statusBox');
            if (sucesso && data) {
                statusBox.innerHTML = `<i class="fas fa-check-circle text-success"></i> Pronto (${data.elapsed_time})`;
                const blob = b64toBlob(data.video_b64, 'video/mp4'); const url = URL.createObjectURL(blob);
                const link = document.getElementById('downloadLink'); link.href = url; link.download = "auditoria_" + data.file_name;
                document.getElementById('downloadArea').style.display = 'block';
            } else { statusBox.innerHTML = "Aguardando..."; }
        }

        function toggleLive() { if (isLive) stopLive(); else startLive(); }
        async function startLive() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
                const videoEl = document.getElementById('webcam'); videoEl.srcObject = stream;
                document.getElementById('placeholder').style.display = 'none'; document.getElementById('videoDisplay').style.display = 'block';
                isLive = true; const btn = document.getElementById('btnLive'); btn.innerHTML = '<i class="fas fa-stop me-2"></i> PARAR'; btn.className = 'btn btn-secondary w-100 btn-sm';
                limparGaleria();
                const proto = window.location.protocol === 'https:' ? 'wss:' : 'ws:'; ws = new WebSocket(`${proto}//${window.location.host}/ws`);
                ws.onopen = () => { document.getElementById('statusBox').innerHTML = '<i class="fas fa-circle text-danger fa-fade me-1"></i> AO VIVO'; enviarConfigWs(); sendFrameLoop(); };
                ws.onmessage = (e) => { const data = JSON.parse(e.data); if (data.image) document.getElementById('videoDisplay').src = "data:image/jpeg;base64," + data.image; if (data.thumbnails) data.thumbnails.forEach(t => adicionarThumbnail(t)); };
            } catch (e) { alert("Câmera inacessível"); }
        }
        function stopLive() {
            isLive = false; if (ws) ws.close();
            const vid = document.getElementById('webcam'); if (vid.srcObject) vid.srcObject.getTracks().forEach(t => t.stop()); vid.srcObject = null;
            const btn = document.getElementById('btnLive'); btn.innerHTML = 'LIGAR CÂMERA'; btn.className = 'btn btn-danger w-100 btn-sm';
            document.getElementById('statusBox').innerText = "Parado.";
        }
        function sendFrameLoop() {
            if (!isLive || !ws || ws.readyState !== WebSocket.OPEN) return;
            const vid = document.getElementById('webcam'); const cvs = document.createElement('canvas'); cvs.width = vid.videoWidth; cvs.height = vid.videoHeight;
            if (cvs.width > 0) { cvs.getContext('2d').drawImage(vid, 0, 0); ws.send(JSON.stringify({ type: 'frame', data: cvs.toDataURL('image/jpeg', 0.5).split(',')[1] })); }
            setTimeout(sendFrameLoop, 66);
        }
        function b64toBlob(b64Data, contentType = '', sliceSize = 512) {
            const byteCharacters = atob(b64Data); const byteArrays = [];
            for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
                const slice = byteCharacters.slice(offset, offset + sliceSize); const byteNumbers = new Array(slice.length);
                for (let i = 0; i < slice.length; i++) byteNumbers[i] = slice.charCodeAt(i);
                byteArrays.push(new Uint8Array(byteNumbers));
            } return new Blob(byteArrays, { type: contentType });
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>